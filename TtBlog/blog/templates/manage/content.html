{% extends "manage/base.html" %}

{% block content %}

<div ms-controller="post">
    <div class="row">
        <div class="col-md-12">
            <h3 class="page-header">文章管理</h3>
        </div>
        <!-- /.col-lg-12 -->
    </div>

    <div class="row">
        <div class="col-md-12" style="text-align:right;">
            <a class="btn btn-primary" href="/manage/addpost">添加文章</a>
        </div>
    </div>
    <div class="row" style="margin-top:15px;">
        <div class="col-md-12">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                <tr>
                    <th style="width:50px;">#</th>
                    <th>标题</th>
                    <th style="width:80px;">主图</th>
                    <th style="width:150px;">创建时间</th>
                    <th style="width:120px;">创建人</th>
                    <th style="width:130px;">操作</th>
                </tr>
                </thead>
                <tbody>
                {% for p in posts %}
                <tr>
                    <td>{{forloop.counter}}</td>
                    <td>{{p.Title}}</td>
                    <td><a href='{{p.Banner}}'><i class="fa fa-image"></i></a></td>
                    <td>{{p.CreateTime | date:'Y/m/d H:i'}}</td>
                    <td>{{p.User.first_name}} {{p.User.last_name}}</td>
                    <td>
                        <a class="btn btn-success btn-sm" href="/manage/editpost/{{p.Id}}">编辑</a>&nbsp;
                        <a class="btn btn-danger btn-sm" ms-click="remove('{{p.Id}}')">删除</a>
                    </td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12" style="text-align:center;">
            <nav aria-label="Page navigation">
                <ul class="pagination">
                    <li>
                        <a href="/manage/content?page=0" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    {% if page > 0 %}
                    <li><a href="/manage/content?page={{page|add:-1}}">上一页</a></li>
                    {% else %}
                    <li><a href="/manage/content?page={{page}}">上一页</a></li>
                    {% endif %}

                    {% if page < totalPage|add:-1 %}
                    <li><a href="/manage/content?page={{page|add:1}}">下一页</a></li>
                    {% else %}
                    <li><a href="/manage/content?page={{page}}">下一页</a></li>
                    {% endif %}
                    <li>
                        <a href="/manage/content?page={{totalPage|add:-1}}" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</div>

{% endblock %}

{% block script %}

<script src="/static/manage/js/biz/post.js"></script>

{% endblock %}